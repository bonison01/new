(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6094],{73660:(e,n,s)=>{Promise.resolve().then(s.bind(s,2624))},2624:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>h});var i=s(95155),r=s(12115),a=s(27364),o=s(76046),t=s(48173),l=s.n(t),c=s(65407),u=s.n(c),d=s(86863),g=s.n(d);function h(){let[e,n]=(0,r.useState)(""),[s,t]=(0,r.useState)(""),[c,d]=(0,r.useState)(null),h=(0,o.useRouter)(),m=async()=>{d(null);try{let{data:n,error:i}=await a.N.from("users").select("user_id, name, email, password, address, phone").eq("email",e).limit(1);if(i)throw Error(i.message);if(n&&n.length>0){let e=n[0];if(await u().compare(s,e.password)){let{password:n,...s}=e;sessionStorage.setItem("user",JSON.stringify(s)),alert("Login successful!"),window.dispatchEvent(new Event("loginStatusChange")),h.push("/discover")}else d("Invalid email or password")}else d("Invalid email or password")}catch(e){e instanceof Error?(console.error("Error logging in:",e.message),d(e.message)):(console.error("Unknown error:",e),d("An unexpected error occurred during login."))}},p=e=>{"Enter"===e.key&&m()};return(0,i.jsx)("div",{className:g().container,children:(0,i.jsxs)("main",{className:g().mainContent,children:[(0,i.jsx)("h1",{children:"Login"}),(0,i.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>n(e.target.value),onKeyDown:p,className:g().inputField}),(0,i.jsx)("input",{type:"password",placeholder:"Password",value:s,onChange:e=>t(e.target.value),onKeyDown:p,className:g().inputField}),(0,i.jsx)("button",{onClick:m,className:g().loginButton,children:"Log In"}),c&&(0,i.jsx)("p",{className:g().errorMessage,children:c}),(0,i.jsxs)("div",{className:g().linkContainer,children:[(0,i.jsx)(l(),{href:"/forgot-password",className:g().link,children:"Forgot Password?"}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(l(),{href:"/login/signup",className:g().link,children:"Sign Up if you're a new user"})]})]})})}},27364:(e,n,s)=>{"use strict";s.d(n,{N:()=>i});let i=(0,s(35974).UU)("https://mdxeolqfiosscdommyhc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1keGVvbHFmaW9zc2Nkb21teWhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk4ODc2NDMsImV4cCI6MjA0NTQ2MzY0M30.6FDluVEiMbeaxQI9BD633IhtxnEwh3f5WzGT5YDOylA",{auth:{persistSession:!0,autoRefreshToken:!0}})},86863:e=>{e.exports={container:"Login_container__VFGfl",mainContent:"Login_mainContent__ZajMl",h1:"Login_h1__BSW2Q",inputField:"Login_inputField__ug_NN",loginButton:"Login_loginButton__PRkbF",errorMessage:"Login_errorMessage__0r9FA",linkContainer:"Login_linkContainer__EkTzE",link:"Login_link__zkXd7"}}},e=>{var n=n=>e(e.s=n);e.O(0,[1948,9268,5974,8173,9134,8441,1517,7358],()=>n(73660)),_N_E=e.O()}]);