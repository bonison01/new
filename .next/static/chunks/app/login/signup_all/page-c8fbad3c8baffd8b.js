(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3969],{17673:(e,s,r)=>{Promise.resolve().then(r.bind(r,86767))},86767:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var t=r(95155),a=r(12115),l=r(27364),n=r(73485),i=r.n(n),u=r(76046);function o(){let[e,s]=(0,a.useState)(""),[r,n]=(0,a.useState)(""),[o,p]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[m,_]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),[S,b]=(0,a.useState)(""),[x,N]=(0,a.useState)(""),[f,v]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[E,y]=(0,a.useState)(""),[C,F]=(0,a.useState)(""),[I,P]=(0,a.useState)(!1),[k,U]=(0,a.useState)(null),[G,R]=(0,a.useState)(null),[T,Y]=(0,a.useState)(""),[M,D]=(0,a.useState)(""),[O,q]=(0,a.useState)(""),[L,W]=(0,a.useState)(""),[J,z]=(0,a.useState)(null),A=(0,u.useRouter)(),Z=async s=>{s.preventDefault();let t="Others"===M&&O.trim()?O:M,{data:a,error:n}=await l.N.from("users").select("email").eq("email",r).limit(1);if(n&&console.error("Error checking email:",n),a&&a.length>0){Y("Error: This email is already registered.");return}let{error:i}=await l.N.from("users").insert([{name:e,email:r,password:o,address:c,phone:m,is_business_owner:h,business_name:h?S:null,business_address:h?x:null,business_type:h?f:null,product_service:h?j:null,business_experience:h?E:null,business_description:h?C:null,is_registered:h?I:null,categories:t?[t]:[],whatsapp:J}]);if(i){console.error("Signup error:",i),Y("Error: ".concat(i.message));return}if(Y("Signup successful! You can now log in at the login page."),k&&h)try{let e="user_photos/user_pic/".concat(r,"_").concat(k.name),{error:s}=await l.N.storage.from("user-photos").upload(e,k);if(s){console.error("Photo upload error:",s),Y("Error uploading photo: ".concat(s.message));return}let{data:{publicUrl:t}}=l.N.storage.from("user-photos").getPublicUrl(e);if(!t){console.error("Error: No public URL returned"),Y("Error retrieving the photo URL.");return}let{error:a}=await l.N.from("users").update({photo:t}).eq("email",r);a?(console.error("Error updating photo URL:",a),Y("Error saving photo URL: ".concat(a.message))):Y("Sign up successfully! You can now Login.")}catch(e){console.error("Unexpected error:",e),Y("Unexpected error occurred while uploading photo.")}setTimeout(()=>{A.push("/login"),alert("Sign up successfully! You can now Login.")},2e3),B()},B=()=>{s(""),n(""),p(""),d(""),_(""),g(!1),b(""),N(""),v(""),w(""),y(""),F(""),P(!1),U(null),R(null),D(""),q(""),W(""),z(null)};return(0,t.jsxs)("div",{className:i().container,children:[(0,t.jsx)("h1",{className:i().title,children:"Sign Up"}),(0,t.jsxs)("form",{onSubmit:Z,className:i().form,children:[(0,t.jsxs)("div",{className:i().formGroup,children:[(0,t.jsx)("label",{className:i().label,children:"Username:"}),(0,t.jsx)("input",{type:"text",className:i().inputField,value:e,onChange:e=>s(e.target.value),placeholder:"Username ",required:!0})]}),(0,t.jsxs)("div",{className:i().formGroup,children:[(0,t.jsx)("label",{className:i().label,children:"Email:"}),(0,t.jsx)("input",{type:"email",className:i().inputField,value:r,onChange:e=>n(e.target.value),placeholder:"Email",required:!0})]}),(0,t.jsxs)("div",{className:i().formGroup,children:[(0,t.jsx)("label",{className:i().label,children:"Password:"}),(0,t.jsx)("input",{type:"password",className:i().inputField,value:o,onChange:e=>p(e.target.value),placeholder:"password",required:!0})]}),(0,t.jsxs)("div",{className:i().formGroup,children:[(0,t.jsx)("label",{className:i().label,children:"Address:"}),(0,t.jsx)("input",{type:"text",className:i().inputField,value:c,onChange:e=>d(e.target.value),placeholder:"Address"})]}),(0,t.jsxs)("div",{className:i().formGroup,children:[(0,t.jsx)("label",{className:i().label,children:"Phone:"}),(0,t.jsx)("input",{type:"tel",className:i().inputField,value:m,onChange:e=>_(e.target.value),placeholder:"Enter Phone number"})]}),(0,t.jsxs)("div",{className:i().formGroup,children:[(0,t.jsx)("label",{className:i().label,children:"WhatsApp Number:"}),(0,t.jsx)("input",{type:"text",className:i().inputField,value:L,onChange:e=>{let s=e.target.value;W(s),s.trim()?z("https://wa.me/".concat(s.replace(/\D/g,""))):z(null)},placeholder:"Enter WhatsApp number"}),J&&(0,t.jsxs)("p",{className:i().linkPreview,children:["Generated Link: ",(0,t.jsx)("a",{href:J,target:"_blank",rel:"noopener noreferrer",children:J})]})]}),(0,t.jsx)("button",{type:"submit",className:i().submitButton,children:"Sign Up"}),T&&(0,t.jsx)("p",{className:i().statusMessage,children:T})]})]})}},27364:(e,s,r)=>{"use strict";r.d(s,{N:()=>t});let t=(0,r(35974).UU)("https://mdxeolqfiosscdommyhc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1keGVvbHFmaW9zc2Nkb21teWhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk4ODc2NDMsImV4cCI6MjA0NTQ2MzY0M30.6FDluVEiMbeaxQI9BD633IhtxnEwh3f5WzGT5YDOylA",{auth:{persistSession:!0,autoRefreshToken:!0}})},76046:(e,s,r)=>{"use strict";var t=r(66658);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},73485:e=>{e.exports={container:"Signup_container__0W1YC",title:"Signup_title__k2gyk",form:"Signup_form__CT_Zy",formGroup:"Signup_formGroup__em_Ye",label:"Signup_label__psg_G",label1:"Signup_label1__q2uYr",inputField:"Signup_inputField__x9wcQ",submitButton:"Signup_submitButton__lTsoR",input:"Signup_input__EEtQm",previewImg:"Signup_previewImg__gWZrb",statusMessage:"Signup_statusMessage__PCnrR",selectCategory:"Signup_selectCategory__6CqmC",inputFieldText:"Signup_inputFieldText__DTOmj",inputFieldEmail:"Signup_inputFieldEmail__x_4_i",inputFieldPassword:"Signup_inputFieldPassword__nr5CY",inputFieldTel:"Signup_inputFieldTel__ZvDkm",div1:"Signup_div1__uPWUt",div2:"Signup_div2__0__od"}}},e=>{var s=s=>e(e.s=s);e.O(0,[4626,5974,8441,1517,7358],()=>s(17673)),_N_E=e.O()}]);