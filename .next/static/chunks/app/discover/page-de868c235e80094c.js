(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1492],{38184:(e,s,i)=>{Promise.resolve().then(i.bind(i,51442))},51442:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>p});var r=i(95155),t=i(12115),o=i(27364),c=i(76046),n=i(5565),a=i(63544),l=i.n(a);function d(e){let{business:s,onClose:i,onRate:t}=e,o=(0,c.useRouter)();return(0,r.jsx)("div",{className:l().modalOverlay,onClick:e=>e.target===e.currentTarget&&i(),children:(0,r.jsxs)("div",{className:l().modalContent,children:[(0,r.jsx)("button",{onClick:i,className:l().closeButton,children:"X"}),(0,r.jsx)("h2",{children:s.business_name||"Business Details"}),(0,r.jsx)(n.default,{src:s.photo||"/default-business.jpg",alt:"Business",width:150,height:150}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Owner:"})," ",s.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",s.email]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Business Address:"})," ",s.business_address||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Product/Service:"})," ",s.product_service||"N/A"]}),(0,r.jsx)("button",{className:l().seeMoreButton,onClick:()=>o.push("/business/".concat(s.user_id)),children:"See More"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{children:"Rate this Business"}),[1,2,3,4,5].map(e=>(0,r.jsx)("span",{onClick:()=>t(e),style:{cursor:"pointer",color:e<=(s.ratings||0)?"gold":"gray",fontSize:"1.5rem"},children:"â˜…"},e))]})]})})}var u=i(87290),_=i.n(u),h=i(48173),m=i.n(h);function p(){let[e,s]=(0,t.useState)([]),[i,c]=(0,t.useState)(null),[n,a]=(0,t.useState)(""),[l,u]=(0,t.useState)([]),[h,p]=(0,t.useState)(""),[x,v]=(0,t.useState)([]),[j,N]=(0,t.useState)(!0),[b,g]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=async()=>{try{let{data:e,error:s}=await o.N.from("new_products").select("*");if(s)throw Error(s.message);v(e||[])}catch(e){g(e instanceof Error?e.message:"An unexpected error occurred.")}finally{N(!1)}};(async()=>{let{data:e,error:i}=await o.N.from("users").select("*");if(!i){let i=e||[];s(i),u(Array.from(new Set(i.flatMap(e=>e.categories||[]))))}})(),e()},[]);let D=e.filter(e=>{var s,i,r;return((null===(s=e.business_name)||void 0===s?void 0:s.toLowerCase().includes(n.toLowerCase()))||(null===(i=e.categories)||void 0===i?void 0:i.some(e=>e.toLowerCase().includes(n.toLowerCase()))))&&(!h||(null===(r=e.categories)||void 0===r?void 0:r.includes(h)))});return(0,r.jsxs)("div",{className:_().container,children:[(0,r.jsx)("section",{className:"bg-black py-16",children:(0,r.jsxs)("div",{className:"container mx-auto px-6 text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white-800 md:text-6xl",children:"Welcome to Mateng Discovery"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Explore every businesses directly."}),(0,r.jsx)(m(),{href:"/discover/product",className:"mt-6 inline-block bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-white hover:text-green-600",children:"Explore Products Now"})]})}),(0,r.jsx)("h1",{children:"Discover Businesses"}),(0,r.jsxs)("div",{className:_().searchFilter,children:[(0,r.jsx)("input",{type:"text",placeholder:"Search businesses or categories",value:n,onChange:e=>a(e.target.value),className:_().searchInput}),(0,r.jsx)("div",{className:_().categoryChips,children:l.map((e,s)=>(0,r.jsx)("button",{className:"".concat(_().chip," ").concat(h===e?_().selected:""),onClick:()=>p(h===e?"":e),children:e},s))})]}),(0,r.jsx)("div",{className:_().content,children:(0,r.jsx)("div",{className:_().businessSection,children:D.map(e=>(0,r.jsxs)("div",{className:_().businessCard,onClick:()=>c(e),children:[(0,r.jsx)("h3",{children:e.business_name}),(0,r.jsx)("p",{children:e.product_service}),e.photo&&(0,r.jsx)("img",{src:e.photo,alt:e.business_name,className:_().photo})]},e.user_id))})}),(0,r.jsxs)("div",{className:_().productSection,children:[(0,r.jsx)("h2",{className:_().subheading,children:"Explore All Products"}),j?(0,r.jsx)("p",{className:_().loading,children:"Loading Products..."}):b?(0,r.jsx)("p",{className:_().error,children:b}):0===x.length?(0,r.jsx)("p",{className:_().noProducts,children:"No products found."}):(0,r.jsx)("div",{className:_().mediaGrid,children:x.map(e=>(0,r.jsxs)("div",{className:_().productCard,children:[(0,r.jsx)("h3",{className:_().productName,children:e.name}),(0,r.jsx)("p",{className:_().productDescription,children:e.description}),(0,r.jsx)("div",{className:_().mediaContainer,children:e.media_urls.map((s,i)=>/\.(mp4|webm|ogg)$/i.test(s)?(0,r.jsx)("video",{src:s,controls:!0,className:_().mediaItem},i):(0,r.jsx)("img",{src:s,alt:"Product ".concat(e.id," - Media ").concat(i+1),className:_().mediaItem},i))})]},e.id))})]}),i&&(0,r.jsx)(d,{business:i,onClose:()=>c(null),onRate:()=>{}})]})}},27364:(e,s,i)=>{"use strict";i.d(s,{N:()=>r});let r=(0,i(35974).UU)("https://mdxeolqfiosscdommyhc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1keGVvbHFmaW9zc2Nkb21teWhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk4ODc2NDMsImV4cCI6MjA0NTQ2MzY0M30.6FDluVEiMbeaxQI9BD633IhtxnEwh3f5WzGT5YDOylA",{auth:{persistSession:!0,autoRefreshToken:!0}})},76046:(e,s,i)=>{"use strict";var r=i(66658);i.o(r,"useParams")&&i.d(s,{useParams:function(){return r.useParams}}),i.o(r,"usePathname")&&i.d(s,{usePathname:function(){return r.usePathname}}),i.o(r,"useRouter")&&i.d(s,{useRouter:function(){return r.useRouter}})},63544:e=>{e.exports={modalOverlay:"BusinessModal_modalOverlay__6u_qO",modalContent:"BusinessModal_modalContent__i6Wx9",closeButton:"BusinessModal_closeButton__IiukY",seeMoreButton:"BusinessModal_seeMoreButton__H2dVQ"}},87290:e=>{e.exports={container:"Discover_container__2_v_b",h1:"Discover_h1__qR3h_","bg-white":"Discover_bg-white__hy2KZ",imageContainer:"Discover_imageContainer__YQxTD","mx-auto":"Discover_mx-auto__j_ghb","text-4xl":"Discover_text-4xl__KgcoI",p:"Discover_p__nk_32","inline-block":"Discover_inline-block__q8djW",searchFilter:"Discover_searchFilter__KjqhG",searchInput:"Discover_searchInput__QnW_o",categoryChips:"Discover_categoryChips__kmm72",chip:"Discover_chip__ap2Kb",selected:"Discover_selected__1FScD",content:"Discover_content__2M8gF",businessSection:"Discover_businessSection__NWvSa",businessCard:"Discover_businessCard__QcmN6",photo:"Discover_photo__3iysa",productSection:"Discover_productSection___Ho0e",subheading:"Discover_subheading__LoRyr",mediaGrid:"Discover_mediaGrid__iLi_k",productCard:"Discover_productCard__ACWEd",productName:"Discover_productName__wtTZl",productDescription:"Discover_productDescription__gizaz",mediaContainer:"Discover_mediaContainer__PFsbD",mediaItem:"Discover_mediaItem__Ub7W1",loading:"Discover_loading__Vll8b",error:"Discover_error__iIIqq",noProducts:"Discover_noProducts__jQUNu",seeMoreButton:"Discover_seeMoreButton__yG4qZ",buyNowButton:"Discover_buyNowButton__166DI"}}},e=>{var s=s=>e(e.s=s);e.O(0,[1439,5974,8173,5565,8441,1517,7358],()=>s(38184)),_N_E=e.O()}]);