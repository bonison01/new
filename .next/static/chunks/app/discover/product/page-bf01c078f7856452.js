(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8944],{15710:(e,t,a)=>{Promise.resolve().then(a.bind(a,37146))},96157:(e,t,a)=>{"use strict";a.d(t,{CartProvider:()=>n,_:()=>i});var s=a(95155),r=a(12115),o=a(9806);let c=(0,r.createContext)(void 0),n=e=>{let{children:t}=e,[a,n]=(0,r.useState)([]),i=(0,o.createClientComponentClient)();(0,r.useEffect)(()=>{let e=localStorage.getItem("cart");e&&n(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(a))},[a]);let l=async e=>{let{data:t,error:a}=await i.from("new_products").select("name, price_inr").eq("id",e).single();return a?(console.error("Error fetching product details:",a.message),{name:"Unknown",price:void 0}):{name:t.name,price:t.price_inr}},u=async e=>{let t=await l(e.id);n(a=>a.find(t=>t.id===e.id)?a.map(t=>t.id===e.id?{...t,qty:t.qty+1}:t):[...a,{...e,...t,qty:1}])},d=a.reduce((e,t)=>e+(t.price?parseFloat(t.price)*t.qty:0),0);return(0,s.jsx)(c.Provider,{value:{cart:a,addToCart:u,updateQty:(e,t)=>{n(a=>a.map(a=>a.id===e?{...a,qty:t}:a))},removeFromCart:e=>{n(t=>t.filter(t=>t.id!==e))},clearCart:()=>n([]),totalPrice:d},children:t})},i=()=>{let e=(0,r.useContext)(c);if(!e)throw Error("useCart must be used within a CartProvider");return e}},37146:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(95155),r=a(12115),o=a(76046),c=a(27364),n=a(96157),i=a(32386),l=a.n(i);let u=()=>{let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),p=(0,o.useRouter)(),{addToCart:m}=(0,n._)();(0,r.useEffect)(()=>{(async()=>{try{let{data:e,error:a}=await c.N.from("new_products").select("*");if(a)throw Error(a.message);t(e||[])}catch(e){d(e instanceof Error?e.message:"An unexpected error occurred.")}finally{i(!1)}})()},[]);let _=e=>{m({id:e.id,name:e.name,price:e.price,qty:1}),p.push("/cart")},h=e=>{e&&window.open("tel:".concat(e),"_self")},I=e=>{e&&window.open(e,"_blank")};return a?(0,s.jsx)("p",{className:l().loading,children:"Loading..."}):u?(0,s.jsx)("p",{className:l().error,children:u}):(0,s.jsx)("div",{className:l().exploreContainer,children:e.map(e=>(0,s.jsxs)("div",{className:l().mediaItem,children:[e.media_urls.map((t,a)=>/\.(mp4|webm|ogg)$/i.test(t)?(0,s.jsx)("video",{src:t,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:l().mediaContent},a):(0,s.jsx)("img",{src:t,alt:"Product ".concat(e.id),className:l().mediaContent},a)),(0,s.jsxs)("div",{className:l().overlay,children:[(0,s.jsxs)("div",{className:l().productInfo,children:[(0,s.jsx)("h2",{className:l().productName,children:e.name}),(0,s.jsx)("p",{className:l().productDescription,children:e.description.length>100?"".concat(e.description.slice(0,100),"..."):e.description})]}),(0,s.jsxs)("div",{className:l().actionIcons,children:[(0,s.jsx)("button",{className:l().buyNowButton,onClick:()=>_(e),"aria-label":"Buy Now",children:"\uD83D\uDED2"}),e.phone&&(0,s.jsx)("button",{className:l().callIcon,onClick:()=>h(e.phone),"aria-label":"Call",children:"\uD83D\uDCDE"}),e.whatsapp&&(0,s.jsx)("button",{className:l().whatsappIcon,onClick:()=>I(e.whatsapp),"aria-label":"WhatsApp",children:"\uD83D\uDCAC"}),(0,s.jsx)("button",{className:l().seeMoreButton,onClick:()=>p.push("/business/".concat(e.user_id)),"aria-label":"See More",children:"More"})]})]})]},e.id))})}},27364:(e,t,a)=>{"use strict";a.d(t,{N:()=>s});let s=(0,a(35974).UU)("https://mdxeolqfiosscdommyhc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1keGVvbHFmaW9zc2Nkb21teWhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk4ODc2NDMsImV4cCI6MjA0NTQ2MzY0M30.6FDluVEiMbeaxQI9BD633IhtxnEwh3f5WzGT5YDOylA",{auth:{persistSession:!0,autoRefreshToken:!0}})},76046:(e,t,a)=>{"use strict";var s=a(66658);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},32386:e=>{e.exports={exploreContainer:"AllProductsPage_exploreContainer__qolOo",mediaItem:"AllProductsPage_mediaItem__zVkb6",mediaContent:"AllProductsPage_mediaContent__AJMg3",overlay:"AllProductsPage_overlay__ISNYH",productInfo:"AllProductsPage_productInfo__O48_O",productName:"AllProductsPage_productName__aFM3H",productDescription:"AllProductsPage_productDescription__g2jZx",actionIcons:"AllProductsPage_actionIcons__Y4vuy",buyNowButton:"AllProductsPage_buyNowButton__WMgcJ",callIcon:"AllProductsPage_callIcon__twNPd",whatsappIcon:"AllProductsPage_whatsappIcon__PlINt",seeMoreButton:"AllProductsPage_seeMoreButton__bI2xa"}}},e=>{var t=t=>e(e.s=t);e.O(0,[7953,5974,9806,8441,1517,7358],()=>t(15710)),_N_E=e.O()}]);