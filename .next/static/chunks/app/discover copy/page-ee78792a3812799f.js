(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[437],{47532:(e,s,r)=>{Promise.resolve().then(r.bind(r,26905))},26905:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p});var t=r(95155),i=r(12115),o=r(27364),c=r(76046),n=r(5565),a=r(10945),l=r.n(a);function d(e){let{business:s,onClose:r,onRate:i}=e,o=(0,c.useRouter)();return(0,t.jsx)("div",{className:l().modalOverlay,onClick:e=>e.target===e.currentTarget&&r(),children:(0,t.jsxs)("div",{className:l().modalContent,children:[(0,t.jsx)("button",{onClick:r,className:l().closeButton,children:"X"}),(0,t.jsx)("h2",{children:s.business_name||"Business Details"}),(0,t.jsx)(n.default,{src:s.photo||"/default-business.jpg",alt:"Business",width:150,height:150}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Owner:"})," ",s.name]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",s.email]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Business Address:"})," ",s.business_address||"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Product/Service:"})," ",s.product_service||"N/A"]}),(0,t.jsx)("button",{className:l().seeMoreButton,onClick:()=>o.push("/business/".concat(s.user_id)),children:"See More"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{children:"Rate this Business"}),[1,2,3,4,5].map(e=>(0,t.jsx)("span",{onClick:()=>i(e),style:{cursor:"pointer",color:e<=(s.ratings||0)?"gold":"gray",fontSize:"1.5rem"},children:"â˜…"},e))]})]})})}var u=r(32933),_=r.n(u),h=r(48173),m=r.n(h);function p(){let[e,s]=(0,i.useState)([]),[r,c]=(0,i.useState)(null),[n,a]=(0,i.useState)(""),[l,u]=(0,i.useState)([]),[h,p]=(0,i.useState)(""),[x,v]=(0,i.useState)([]),[j,N]=(0,i.useState)(!0),[b,g]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=async()=>{try{let{data:e,error:s}=await o.N.from("new_products").select("*");if(s)throw Error(s.message);v(e||[])}catch(e){g(e instanceof Error?e.message:"An unexpected error occurred.")}finally{N(!1)}};(async()=>{let{data:e,error:r}=await o.N.from("users").select("*");if(!r){let r=e||[];s(r),u(Array.from(new Set(r.flatMap(e=>e.categories||[]))))}})(),e()},[]);let D=e.filter(e=>{var s,r,t;return((null===(s=e.business_name)||void 0===s?void 0:s.toLowerCase().includes(n.toLowerCase()))||(null===(r=e.categories)||void 0===r?void 0:r.some(e=>e.toLowerCase().includes(n.toLowerCase()))))&&(!h||(null===(t=e.categories)||void 0===t?void 0:t.includes(h)))});return(0,t.jsxs)("div",{className:_().container,children:[(0,t.jsx)("section",{className:"bg-black py-16",children:(0,t.jsxs)("div",{className:"container mx-auto px-6 text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-white-800 md:text-6xl",children:"Welcome to Mateng Discovery"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Explore every businesses directly."}),(0,t.jsx)(m(),{href:"/discover/product",className:"mt-6 inline-block bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-white hover:text-green-600",children:"Explore Products Now"})]})}),(0,t.jsx)("h1",{children:"Discover Businesses"}),(0,t.jsxs)("div",{className:_().searchFilter,children:[(0,t.jsx)("input",{type:"text",placeholder:"Search businesses or categories",value:n,onChange:e=>a(e.target.value),className:_().searchInput}),(0,t.jsx)("div",{className:_().categoryChips,children:l.map((e,s)=>(0,t.jsx)("button",{className:"".concat(_().chip," ").concat(h===e?_().selected:""),onClick:()=>p(h===e?"":e),children:e},s))})]}),(0,t.jsx)("div",{className:_().content,children:(0,t.jsx)("div",{className:_().businessSection,children:D.map(e=>(0,t.jsxs)("div",{className:_().businessCard,onClick:()=>c(e),children:[(0,t.jsx)("h3",{children:e.business_name}),(0,t.jsx)("p",{children:e.product_service}),e.photo&&(0,t.jsx)("img",{src:e.photo,alt:e.business_name,className:_().photo})]},e.user_id))})}),(0,t.jsxs)("div",{className:_().productSection,children:[(0,t.jsx)("h2",{className:_().subheading,children:"Explore All Products"}),j?(0,t.jsx)("p",{className:_().loading,children:"Loading Products..."}):b?(0,t.jsx)("p",{className:_().error,children:b}):0===x.length?(0,t.jsx)("p",{className:_().noProducts,children:"No products found."}):(0,t.jsx)("div",{className:_().mediaGrid,children:x.map(e=>(0,t.jsxs)("div",{className:_().productCard,children:[(0,t.jsx)("h3",{className:_().productName,children:e.name}),(0,t.jsx)("p",{className:_().productDescription,children:e.description}),(0,t.jsx)("div",{className:_().mediaContainer,children:e.media_urls.map((s,r)=>/\.(mp4|webm|ogg)$/i.test(s)?(0,t.jsx)("video",{src:s,controls:!0,className:_().mediaItem},r):(0,t.jsx)("img",{src:s,alt:"Product ".concat(e.id," - Media ").concat(r+1),className:_().mediaItem},r))})]},e.id))})]}),r&&(0,t.jsx)(d,{business:r,onClose:()=>c(null),onRate:()=>{}})]})}},27364:(e,s,r)=>{"use strict";r.d(s,{N:()=>t});let t=(0,r(35974).UU)("https://mdxeolqfiosscdommyhc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1keGVvbHFmaW9zc2Nkb21teWhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk4ODc2NDMsImV4cCI6MjA0NTQ2MzY0M30.6FDluVEiMbeaxQI9BD633IhtxnEwh3f5WzGT5YDOylA",{auth:{persistSession:!0,autoRefreshToken:!0}})},76046:(e,s,r)=>{"use strict";var t=r(66658);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},10945:e=>{e.exports={modalOverlay:"BusinessModal_modalOverlay__nV2hL",modalContent:"BusinessModal_modalContent__oUVhA",closeButton:"BusinessModal_closeButton__78x1Z",seeMoreButton:"BusinessModal_seeMoreButton__XjOan"}},32933:e=>{e.exports={container:"Discover_container__xJmEY",h1:"Discover_h1__GNFEt","bg-white":"Discover_bg-white__PIZL0",imageContainer:"Discover_imageContainer__uzYcN","mx-auto":"Discover_mx-auto__E0_2f","text-4xl":"Discover_text-4xl__MMNJe",p:"Discover_p__rblvk","inline-block":"Discover_inline-block__GcuN2",searchFilter:"Discover_searchFilter__bPVdH",searchInput:"Discover_searchInput__sKwQL",categoryChips:"Discover_categoryChips__4YQ65",chip:"Discover_chip__o51Co",selected:"Discover_selected__EVBp1",content:"Discover_content__CTf6R",businessSection:"Discover_businessSection__6oSkR",businessCard:"Discover_businessCard__3X3fn",photo:"Discover_photo__pUM5P",productSection:"Discover_productSection__HeBwP",subheading:"Discover_subheading__1U5_O",mediaGrid:"Discover_mediaGrid__5FSr6",productCard:"Discover_productCard__AUGLJ",productName:"Discover_productName__dvZxj",productDescription:"Discover_productDescription__zmsaB",mediaContainer:"Discover_mediaContainer___A0Wr",mediaItem:"Discover_mediaItem__9fh4W",loading:"Discover_loading__WRyjK",error:"Discover_error__0ylOC",noProducts:"Discover_noProducts__Jjjeo",seeMoreButton:"Discover_seeMoreButton__Zh4Ap",buyNowButton:"Discover_buyNowButton__VUehW"}}},e=>{var s=s=>e(e.s=s);e.O(0,[4767,5974,8173,5565,8441,1517,7358],()=>s(47532)),_N_E=e.O()}]);