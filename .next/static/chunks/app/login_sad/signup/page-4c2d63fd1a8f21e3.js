(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4888],{59098:(e,s,t)=>{Promise.resolve().then(t.bind(t,4442))},4442:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(95155),a=t(12115),l=t(27364),n=t(66066),u=t.n(n),i=t(76046);function o(){let[e,s]=(0,a.useState)(""),[t,n]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[d,h]=(0,a.useState)(""),[g,_]=(0,a.useState)(!1),[S,b]=(0,a.useState)(""),[N,f]=(0,a.useState)(""),[x,v]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[k,y]=(0,a.useState)(""),[I,E]=(0,a.useState)(""),[P,F]=(0,a.useState)(!1),[U,C]=(0,a.useState)(null),[G,R]=(0,a.useState)(null),[M,O]=(0,a.useState)(""),[L,D]=(0,a.useState)(""),[J,Y]=(0,a.useState)(""),[q,A]=(0,a.useState)(""),[z,B]=(0,a.useState)(null),W=(0,i.useRouter)(),T=async s=>{s.preventDefault();let r="Others"===L&&J.trim()?J:L,{data:a,error:n}=await l.N.from("users").select("email").eq("email",t).limit(1);if(n&&console.error("Error checking email:",n),a&&a.length>0){O("Error: This email is already registered.");return}let{error:u}=await l.N.from("users").insert([{name:e,email:t,password:o,address:p,phone:d,is_business_owner:g,business_name:g?S:null,business_address:g?N:null,business_type:g?x:null,product_service:g?j:null,business_experience:g?k:null,business_description:g?I:null,is_registered:g?P:null,categories:r?[r]:[],whatsapp:z}]);if(u){console.error("Signup error:",u),O("Error: ".concat(u.message));return}if(O("Signup successful! You can now log in at the login page."),U&&g)try{let e="user_photos/user_pic/".concat(t,"_").concat(U.name),{error:s}=await l.N.storage.from("user-photos").upload(e,U);if(s){console.error("Photo upload error:",s),O("Error uploading photo: ".concat(s.message));return}let{data:{publicUrl:r}}=l.N.storage.from("user-photos").getPublicUrl(e);if(!r){console.error("Error: No public URL returned"),O("Error retrieving the photo URL.");return}let{error:a}=await l.N.from("users").update({photo:r}).eq("email",t);a?(console.error("Error updating photo URL:",a),O("Error saving photo URL: ".concat(a.message))):O("Sign up successfully! You can now Login.")}catch(e){console.error("Unexpected error:",e),O("Unexpected error occurred while uploading photo.")}setTimeout(()=>{W.push("/login"),alert("Sign up successfully! You can now Login.")},2e3),V()},V=()=>{s(""),n(""),c(""),m(""),h(""),_(!1),b(""),f(""),v(""),w(""),y(""),E(""),F(!1),C(null),R(null),D(""),Y(""),A(""),B(null)};return(0,r.jsxs)("div",{className:u().container,children:[(0,r.jsx)("h1",{className:u().title,children:"Sign Up"}),(0,r.jsxs)("form",{onSubmit:T,className:u().form,children:[(0,r.jsxs)("div",{className:u().formGroup,children:[(0,r.jsx)("label",{className:u().label,children:"Name:"}),(0,r.jsx)("input",{type:"text",className:u().inputField,value:e,onChange:e=>s(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:u().formGroup,children:[(0,r.jsx)("label",{className:u().label,children:"Email:"}),(0,r.jsx)("input",{type:"email",className:u().inputField,value:t,onChange:e=>n(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:u().formGroup,children:[(0,r.jsx)("label",{className:u().label,children:"Password:"}),(0,r.jsx)("input",{type:"password",className:u().inputField,value:o,onChange:e=>c(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:u().formGroup,children:[(0,r.jsx)("label",{className:u().label,children:"Address:"}),(0,r.jsx)("input",{type:"text",className:u().inputField,value:p,onChange:e=>m(e.target.value)})]}),(0,r.jsxs)("div",{className:u().formGroup,children:[(0,r.jsx)("label",{className:u().label,children:"Phone:"}),(0,r.jsx)("input",{type:"tel",className:u().inputField,value:d,onChange:e=>h(e.target.value)})]}),(0,r.jsxs)("div",{className:u().formGroup,children:[(0,r.jsx)("label",{className:u().label,children:"WhatsApp Number:"}),(0,r.jsx)("input",{type:"text",className:u().inputField,value:q,onChange:e=>{let s=e.target.value;A(s),s.trim()?B("https://wa.me/".concat(s.replace(/\D/g,""))):B(null)},placeholder:"Enter WhatsApp number"}),z&&(0,r.jsxs)("p",{className:u().linkPreview,children:["Generated Link: ",(0,r.jsx)("a",{href:z,target:"_blank",rel:"noopener noreferrer",children:z})]})]}),(0,r.jsx)("button",{type:"submit",className:u().submitButton,children:"Sign Up"}),M&&(0,r.jsx)("p",{className:u().statusMessage,children:M})]})]})}},27364:(e,s,t)=>{"use strict";t.d(s,{N:()=>r});let r=(0,t(35974).UU)("https://mdxeolqfiosscdommyhc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1keGVvbHFmaW9zc2Nkb21teWhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk4ODc2NDMsImV4cCI6MjA0NTQ2MzY0M30.6FDluVEiMbeaxQI9BD633IhtxnEwh3f5WzGT5YDOylA",{auth:{persistSession:!0,autoRefreshToken:!0}})},76046:(e,s,t)=>{"use strict";var r=t(66658);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},66066:e=>{e.exports={container:"Signup_container__k4aOA",h1:"Signup_h1__51mnU",form:"Signup_form__FcZK6",inputField:"Signup_inputField__lSteP",submitButton:"Signup_submitButton__mwthA",statusMessage:"Signup_statusMessage__2DpwH",label:"Signup_label__LaRw5",formGroup:"Signup_formGroup__qjkHm",textarea:"Signup_textarea__058P8",select:"Signup_select__BW6Y1",input:"Signup_input__eJmh2",linkPreview:"Signup_linkPreview__n24rO"}}},e=>{var s=s=>e(e.s=s);e.O(0,[2245,5974,8441,1517,7358],()=>s(59098)),_N_E=e.O()}]);