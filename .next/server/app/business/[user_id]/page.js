(()=>{var e={};e.id=5555,e.ids=[5555],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},66757:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=r(70260),a=r(28203),l=r(25155),n=r.n(l),o=r(67292),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let d=["",{children:["business",{children:["[user_id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,70523)),"/Users/abc/Documents/ola/map_new-main/new/app/business/[user_id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"/Users/abc/Documents/ola/map_new-main/new/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/abc/Documents/ola/map_new-main/new/app/business/[user_id]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/business/[user_id]/page",pathname:"/business/[user_id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},48353:(e,t,r)=>{Promise.resolve().then(r.bind(r,70523))},84801:(e,t,r)=>{Promise.resolve().then(r.bind(r,59427))},59427:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(45512),a=r(58009),l=r(79334),n=r(27518),o=r(3677);let i=({product:e,onBuyNow:t,addCartIcon:r})=>{let{addToCart:l}=(0,o._)(),[n,i]=(0,a.useState)(0);return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,s.jsxs)("div",{className:"relative w-full h-64 overflow-hidden rounded-lg mb-4 group",children:[e.media_urls.map((t,a)=>{let o=a===n,i=/\.(mp4|webm|ogg)$/i.test(t);return(0,s.jsxs)("div",{className:`absolute inset-0 transition-opacity duration-300 ${o?"opacity-100":"opacity-0"}`,children:[i?(0,s.jsx)("video",{src:t,controls:!0,muted:!0,loop:!0,className:"w-full h-full object-cover rounded-lg"}):(0,s.jsx)("img",{src:t,alt:`Product ${e.id} - Media ${a+1}`,className:"w-full h-full object-cover rounded-lg"}),r&&(0,s.jsx)("button",{className:"absolute top-2 right-2 bg-yellow-500 text-white p-2 rounded-full hover:bg-yellow-600",onClick:()=>l({id:e.id,name:e.name,price:e.price||"N/A",qty:1}),children:"\uD83D\uDED2"})]},a)}),e.media_urls.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{i(t=>0===t?e.media_urls.length-1:t-1)},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75",children:"❮"}),(0,s.jsx)("button",{onClick:()=>{i(t=>(t+1)%e.media_urls.length)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75",children:"❯"})]})]}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2 text-center",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4 text-center",children:e.description}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-4 text-center",children:["Rs. ",e.price_inr]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{onClick:()=>l({id:e.id,name:e.name,price:e.price||"N/A",qty:1}),className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 flex-1",children:"Add to Cart \uD83D\uDED2"}),(0,s.jsx)("button",{onClick:()=>t(e),className:"bg-yellow-500 text-white py-2 px-4 rounded hover:bg-black hover:text-green-600 flex-1",children:"Buy Now"})]})]})},d=({mediaUrls:e})=>{let[t,r]=(0,a.useState)(0);return(0,s.jsxs)("div",{className:"relative w-full h-64 overflow-hidden rounded-lg mb-4",children:[e.map((e,r)=>{let a=r===t,l=/\.(mp4|webm|ogg)$/i.test(e);return(0,s.jsx)("div",{className:`absolute inset-0 transition-opacity duration-300 ${a?"opacity-100":"opacity-0"}`,children:l?(0,s.jsx)("video",{src:e,controls:!0,muted:!0,loop:!0,className:"w-full h-full object-cover rounded-lg"}):(0,s.jsx)("img",{src:e,alt:`Media ${r+1}`,className:"w-full h-full object-cover rounded-lg"})},r)}),e.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{r(t=>0===t?e.length-1:t-1)},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75",children:"❮"}),(0,s.jsx)("button",{onClick:()=>{r(t=>(t+1)%e.length)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75",children:"❯"})]})]})},c=({product:e,businessId:t,onClose:r})=>{let[l,o]=(0,a.useState)(""),[i,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[h,b]=(0,a.useState)(""),[g,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let{data:e,error:r}=await n.N.from("users").select("email").eq("user_id",t).single();if(r)throw r;e&&b(e.email)}catch(e){console.error("Error fetching receiver email:",e),alert("Unable to fetch receiver email.")}})()},[t]);let j=()=>`ORD-${Math.floor(1e5+9e5*Math.random())}`,w=async s=>{s.preventDefault(),f(!0);let a=j(),o={order_id:a,product_id:e.id,product_name:e.name,quantity:parseInt(l,10),buyer_name:i,buyer_address:u,buyer_phone:p,business_id:t,receiver_email:h};try{let{data:e,error:t}=await n.N.from("orders").insert(o);if(t)throw t;v(a),alert(`Order submitted successfully! Your Order ID is ${a}`),r()}catch(e){console.error("Error submitting order:",e),alert("Failed to submit order. Please try again.")}finally{f(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Buy ",e.name]}),(0,s.jsx)(d,{mediaUrls:e.media_urls}),(0,s.jsxs)("form",{onSubmit:w,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"qty",className:"block text-sm font-medium text-gray-700",children:"Quantity"}),(0,s.jsx)("input",{type:"number",id:"qty",value:l,onChange:e=>o(e.target.value),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",id:"name",value:i,onChange:e=>c(e.target.value),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,s.jsx)("input",{type:"text",id:"address",value:u,onChange:e=>m(e.target.value),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,s.jsx)("input",{type:"text",id:"phone",value:p,onChange:e=>x(e.target.value),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:`bg-green-500 text-white py-2 px-4 rounded w-full hover:bg-green-600 ${g?"opacity-50 cursor-not-allowed":""}`,disabled:g,children:g?"Submitting...":"Submit"}),(0,s.jsx)("button",{type:"button",onClick:r,className:"mt-4 bg-gray-300 text-black py-2 px-4 rounded hover:bg-gray-400 w-full",children:"Cancel"})]}),y&&(0,s.jsxs)("div",{className:"mt-4 bg-green-100 p-4 rounded text-green-700 text-center",children:["Your Order ID: ",(0,s.jsx)("strong",{children:y})]})]})})};function u(){let{cart:e}=(0,o._)(),t=(0,l.useParams)(),[r,d]=(0,a.useState)(null),[u,m]=(0,a.useState)([]),[p,x]=(0,a.useState)(!0),[h,b]=(0,a.useState)(""),[g,f]=(0,a.useState)(null),y=async()=>{if(!h||!t?.user_id)return;let e=[...r?.comments||[],{user:"Anonymous",text:h}];await n.N.from("users").update({comments:e}).eq("user_id",t.user_id),d(t=>t?{...t,comments:e}:t),b("")};return p?(0,s.jsx)("div",{className:"text-center",children:"Loading..."}):r?(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-5",children:[(0,s.jsx)("div",{className:"fixed buttom-4 right-4",children:(0,s.jsx)("a",{href:"/cart",children:(0,s.jsxs)("button",{className:"bg-yellow-500 text-white p-2 rounded-full hover:bg-yellow-600",children:["\uD83D\uDED2 ",e.length]})})}),r.cover_photo_url?(0,s.jsx)("div",{className:"w-full h-80 overflow-hidden rounded-lg mb-5",children:(0,s.jsx)("img",{src:r.cover_photo_url,alt:"Cover Photo",className:"w-full h-full object-cover"})}):(0,s.jsx)("div",{className:"w-full h-80 flex items-center justify-center bg-gray-200 text-gray-500 text-lg rounded-lg mb-5",children:"No Cover Photo Available"}),(0,s.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow mb-10",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-3",children:r.business_name}),(0,s.jsx)("p",{className:"text-lg text-gray-600 mb-2",children:r.product_service}),(0,s.jsxs)("p",{className:"text-gray-600 mb-2",children:["Address: ",r.business_address]}),(0,s.jsxs)("p",{className:"text-gray-600 mb-2",children:["Phone: ",r.phone]}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Website:"," ",(0,s.jsx)("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:underline",children:r.website})]})]}),(0,s.jsxs)("div",{className:"mb-10",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-5",children:"Products"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-5 justify-center",children:u.map(e=>(0,s.jsx)(i,{product:e,onBuyNow:f,addCartIcon:!0},e.id))})]}),(0,s.jsxs)("div",{className:"bg-white p-5 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-5",children:"Comments"}),r.comments?.length?(0,s.jsx)("ul",{className:"space-y-4 mb-5",children:r.comments.map((e,t)=>(0,s.jsxs)("li",{className:"p-3 bg-gray-100 rounded-lg",children:[(0,s.jsxs)("strong",{className:"block text-gray-800",children:[e.user,":"]}),(0,s.jsx)("span",{className:"text-gray-600",children:e.text})]},t))}):(0,s.jsx)("p",{className:"text-gray-500",children:"No comments yet. Be the first to leave feedback!"}),(0,s.jsx)("textarea",{value:h,onChange:e=>b(e.target.value),placeholder:"Leave a comment...",className:"w-full p-3 border border-gray-300 rounded-lg mb-4 text-black py-2 px-4"}),(0,s.jsx)("button",{onClick:y,className:"bg-green-600 text-white py-2 px-4 rounded-lg",children:"Submit Comment"})]}),g&&(0,s.jsx)(c,{product:g,businessId:r.user_id,onClose:()=>f(null)})]}):(0,s.jsx)("div",{className:"text-center",children:"Business not found."})}},70523:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/abc/Documents/ola/map_new-main/new/app/business/[user_id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/abc/Documents/ola/map_new-main/new/app/business/[user_id]/page.tsx","default")},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(88077);let a=async e=>[{type:"image/x-icon",sizes:"1004x354",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,1866,8077,8767],()=>r(66757));module.exports=s})();