(()=>{var e={};e.id=2793,e.ids=[2793],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},56317:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>n});var a=r(70260),s=r(28203),i=r(25155),o=r.n(i),d=r(67292),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(t,l);let n=["",{children:["business",{children:["product",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,16017)),"/Users/abc/Documents/ola/map_new-main/new/app/business/product/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"/Users/abc/Documents/ola/map_new-main/new/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/abc/Documents/ola/map_new-main/new/app/business/product/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/business/product/page",pathname:"/business/product",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},8591:(e,t,r)=>{Promise.resolve().then(r.bind(r,16017))},68423:(e,t,r)=>{Promise.resolve().then(r.bind(r,42085))},42085:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(45512),s=r(58009),i=r(27518),o=r(94715),d=r.n(o);function l(){let[e,t]=(0,s.useState)(null),[r,o]=(0,s.useState)([]),[l,n]=(0,s.useState)(""),[u,c]=(0,s.useState)(""),[p,m]=(0,s.useState)(""),[_,h]=(0,s.useState)([]),[x,P]=(0,s.useState)([]),[g,f]=(0,s.useState)(!1),[v,j]=(0,s.useState)(null),[b,w]=(0,s.useState)(""),[N,U]=(0,s.useState)(""),[y,q]=(0,s.useState)(""),[C,S]=(0,s.useState)([]),[B,E]=(0,s.useState)([]),[M,k]=(0,s.useState)(null),[G,L]=(0,s.useState)(null),D=async e=>{let{data:t,error:r}=await i.N.from("new_products").select("*").eq("user_id",e);r?k("Failed to fetch products."):o(t||[])},F=async t=>{if(!e){k("User information is missing. Please log in again.");return}if(window.confirm("Are you sure you want to delete this product?")){k(null),L(null);try{let{error:r}=await i.N.from("new_products").delete().eq("id",t).eq("user_id",e.user_id);if(r)throw Error("Failed to delete product.");L("Product deleted successfully!"),D(e.user_id)}catch(e){k(e instanceof Error?e.message:"An unknown error occurred.")}}},A=(e,t=!1)=>{if(e.target.files){let r=Array.from(e.target.files);t?(S(r),E(r.map(e=>URL.createObjectURL(e)))):(h(r),P(r.map(()=>({url:"",loading:!0}))),r.forEach((e,t)=>{let r=new FileReader;r.onloadend=()=>{P(e=>{let a=[...e];return a[t]={url:r.result,loading:!1},a})},r.readAsDataURL(e)}))}},I=async(e,t)=>{let r=[];for(let a of e){let e=a.name.split(".").pop(),s=`${t}_${Date.now()}.${e}`,{data:o,error:d}=await i.N.storage.from("product-media").upload(`media/${s}`,a);if(d)throw Error("Error uploading media files.");let{publicUrl:l}=i.N.storage.from("product-media").getPublicUrl(`media/${s}`).data;l&&r.push(l)}return r},R=async()=>{if(!e){k("User information is missing. Please log in again.");return}if(!l||!u||!p||0===_.length){k("All fields are required.");return}f(!0),k(null),L(null);try{let t=await I(_,e.user_id),{error:r}=await i.N.from("new_products").insert({user_id:e.user_id,name:l,description:u,price_inr:parseFloat(p),media_urls:t});if(r)throw Error("Failed to save product.");L("Product uploaded successfully!"),n(""),c(""),m(""),h([]),P([]),D(e.user_id)}catch(e){k(e instanceof Error?e.message:"An unknown error occurred.")}finally{f(!1)}},$=e=>{j(e.id),w(e.name),U(e.description),q(e.price_inr.toString()),E(e.media_urls),S([])},z=()=>{j(null),w(""),U(""),q(""),S([]),E([])},O=async()=>{if(!v||!b||!N||!y){k("All fields are required.");return}k(null),L(null);try{let t=C.length>0?await I(C,e?.user_id||""):B,{error:r}=await i.N.from("new_products").update({name:b,description:N,price_inr:parseFloat(y),media_urls:t}).eq("id",v);if(r)throw Error("Failed to update product.");L("Product updated successfully!"),z(),D(e?.user_id||"")}catch(e){k(e instanceof Error?e.message:"An unknown error occurred.")}};return(0,a.jsxs)("div",{className:d().container,children:[(0,a.jsx)("h1",{className:d().title,children:"Upload Product"}),M&&(0,a.jsx)("p",{className:d().error,children:M}),G&&(0,a.jsx)("p",{className:d().success,children:G}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsx)("label",{htmlFor:"productName",children:"Product Name"}),(0,a.jsx)("input",{id:"productName",type:"text",value:l,onChange:e=>n(e.target.value),className:d().input})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsx)("label",{htmlFor:"productDescription",children:"Product Description"}),(0,a.jsx)("textarea",{id:"productDescription",value:u,onChange:e=>c(e.target.value),className:d().textarea})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsx)("label",{htmlFor:"productPrice",children:"Product Price (INR)"}),(0,a.jsx)("input",{id:"productPrice",type:"number",value:p,onChange:e=>m(e.target.value),className:d().input})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsx)("label",{htmlFor:"productMedia",children:"Product Images/Videos"}),(0,a.jsx)("input",{id:"productMedia",type:"file",accept:"image/*,video/*",multiple:!0,onChange:A,className:d().fileInput}),(0,a.jsx)("div",{className:d().previews,children:x.map((e,t)=>(0,a.jsx)("div",{className:d().preview,children:e.loading?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsx)("img",{src:e.url,alt:`Preview ${t}`,className:d().thumbnail})},t))})]}),(0,a.jsx)("button",{onClick:R,disabled:g,className:d().uploadButton,children:g?"Uploading...":"Upload Product"})]}),(0,a.jsx)("h2",{className:d().productListTitle,children:"Your Products"}),(0,a.jsx)("div",{className:d().productList,children:r.map(e=>(0,a.jsxs)("div",{className:d().productCard,children:[(0,a.jsx)("h3",{children:e.name}),(0,a.jsx)("p",{children:e.description}),(0,a.jsxs)("p",{children:["Price: â‚¹",e.price_inr]}),(0,a.jsx)("div",{className:d().thumbnailList,children:e.media_urls.slice(0,3).map((t,r)=>(0,a.jsx)("img",{src:t,alt:`Product ${e.id}`,className:d().thumbnail},r))}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>$(e),className:d().editButton,children:"Edit"}),(0,a.jsx)("button",{onClick:()=>F(e.id),className:d().deleteButton,children:"Delete"})]})]},e.id))}),v&&(0,a.jsx)("div",{className:d().editModalOverlay,children:(0,a.jsxs)("div",{className:d().editModal,children:[(0,a.jsx)("h3",{children:"Edit Product"}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsx)("label",{htmlFor:"updatedName",children:"Product Name"}),(0,a.jsx)("input",{id:"updatedName",type:"text",value:b,onChange:e=>w(e.target.value),className:d().input})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsx)("label",{htmlFor:"updatedDescription",children:"Product Description"}),(0,a.jsx)("textarea",{id:"updatedDescription",value:N,onChange:e=>U(e.target.value),className:d().textarea})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsx)("label",{htmlFor:"updatedPrice",children:"Product Price (INR)"}),(0,a.jsx)("input",{id:"updatedPrice",type:"number",value:y,onChange:e=>q(e.target.value),className:d().input})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsx)("label",{htmlFor:"updatedMedia",children:"Update Images/Videos"}),(0,a.jsx)("input",{id:"updatedMedia",type:"file",accept:"image/*,video/*",multiple:!0,onChange:e=>A(e,!0),className:d().fileInput}),(0,a.jsxs)("div",{className:d().previews,children:[B.map((e,t)=>(0,a.jsx)("div",{className:d().preview,children:(0,a.jsx)("img",{src:e,alt:`Edit Preview ${t}`,className:d().thumbnail})},t)),C.map((e,t)=>(0,a.jsx)("div",{className:d().preview,children:"New"},t))]})]}),(0,a.jsx)("button",{onClick:O,className:d().saveButton,children:"Save Changes"}),(0,a.jsx)("button",{onClick:z,className:d().cancelButton,children:"Cancel"})]})})]})}},94715:e=>{e.exports={container:"ProductUploadPage_container__7dL5D",title:"ProductUploadPage_title__zdsyA",error:"ProductUploadPage_error__wqSxz",success:"ProductUploadPage_success__W3gf3",formGroup:"ProductUploadPage_formGroup__Hra1x",input:"ProductUploadPage_input__Z9UiO",textarea:"ProductUploadPage_textarea__AJkj0",fileInput:"ProductUploadPage_fileInput__G_gC_",previews:"ProductUploadPage_previews__p0Yj2",preview:"ProductUploadPage_preview__lUl4_",thumbnail:"ProductUploadPage_thumbnail__RPS7u",uploadButton:"ProductUploadPage_uploadButton___TKIp",saveButton:"ProductUploadPage_saveButton__9UzbH",cancelButton:"ProductUploadPage_cancelButton__o9Ysp",editButton:"ProductUploadPage_editButton__C_Rti",productListTitle:"ProductUploadPage_productListTitle__PO9VX",productList:"ProductUploadPage_productList__LL8rF",productCard:"ProductUploadPage_productCard__gBi4d",thumbnailList:"ProductUploadPage_thumbnailList__BnQX7",editModalOverlay:"ProductUploadPage_editModalOverlay__IMaP1",editModal:"ProductUploadPage_editModal__8RhfU",new:"ProductUploadPage_new__EqH1b",body:"ProductUploadPage_body__MMNxv",h1:"ProductUploadPage_h1__KhBsk",h2:"ProductUploadPage_h2__sjDU6",h3:"ProductUploadPage_h3__MIbuh",deleteButton:"ProductUploadPage_deleteButton__VL780"}},16017:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/abc/Documents/ola/map_new-main/new/app/business/product/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/abc/Documents/ola/map_new-main/new/app/business/product/page.tsx","default")},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(88077);let s=async e=>[{type:"image/x-icon",sizes:"1004x354",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,1866,8077,8767],()=>r(56317));module.exports=a})();