(()=>{var e={};e.id=9019,e.ids=[9019],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},37741:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>p,routeModule:()=>u,tree:()=>d});var r=s(70260),a=s(28203),n=s(25155),i=s.n(n),o=s(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["bookDelivery copy",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,45273)),"/Users/abc/Documents/ola/map_new-main/new/app/bookDelivery copy/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,80642)),"/Users/abc/Documents/ola/map_new-main/new/app/bookDelivery copy/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"/Users/abc/Documents/ola/map_new-main/new/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["/Users/abc/Documents/ola/map_new-main/new/app/bookDelivery copy/page.tsx"],c={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/bookDelivery copy/page",pathname:"/bookDelivery copy",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7762:(e,t,s)=>{Promise.resolve().then(s.bind(s,45273))},97146:(e,t,s)=>{Promise.resolve().then(s.bind(s,37141))},74058:()=>{},37106:()=>{},37141:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s(45512),a=s(58009),n=s(5429),i=s(13784),o=s(53668),l=s(27518),d=s(12590),p=s.n(d),c=s(28531),u=s.n(c);let h=["places"],m={width:"100%",height:"400px"},x={lat:28.6139,lng:77.209};function _(){let e=(0,i.R)(),[t,s]=(0,a.useState)({name:"",phone:"",address:"",instructions:""}),[d,c]=(0,a.useState)({name:"",phone:"",address:"",instructions:""}),[_,f]=(0,a.useState)(!1),[v,g]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),[j,k]=(0,a.useState)(null),[N,w]=(0,a.useState)(null),D=(0,a.useRef)(null),P=(0,a.useRef)(null),C=e=>{let r="pickup"===e?D.current:P.current;if(r){let a=r.getPlace();if(a?.geometry?.location){let r=a.formatted_address||"";"pickup"===e&&s({...t,address:r}),"dropoff"===e&&c({...d,address:r})}}},S=t=>{"pickup"===t?(_?s({name:"",phone:"",address:"",instructions:""}):e&&s({...e,instructions:""}),f(!_)):(v?c({name:"",phone:"",address:"",instructions:""}):e&&c({...e,instructions:""}),g(!v))},q=async()=>{if(!t.address||!d.address||null===y||null===j){alert("Please fill in all the required details.");return}let e={pickup_name:t.name,pickup_phone:t.phone,pickup_address:t.address,dropoff_name:d.name,dropoff_phone:d.phone,dropoff_address:d.address,instructions:{pickup:t.instructions,dropoff:d.instructions},distance:y,charge:j};try{let{error:s}=await l.N.from("delivery_orders").insert(e);if(s)throw s;let r=await fetch("/api/send-telegram",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`${t.name} → ${d.name}`,message:`New Delivery:
Pickup: ${t.address}
Dropoff: ${d.address}
Distance: ${y.toFixed(2)} km
Charge: ₹${j.toFixed(2)}`})});if(!r.ok){let e=await r.text();throw Error(`Telegram Error: ${e}`)}alert("Booking confirmed and notification sent!")}catch(e){console.error(e),alert("An error occurred. Please try again.")}};return(0,r.jsx)(n.aJ,{googleMapsApiKey:"AIzaSyAVWx_5rh1jHYHCR-ghd5VFFc8nSve_1F0",libraries:h,children:(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsxs)("div",{className:p().detailsWrapper,children:[(0,r.jsxs)("div",{className:p().detailsSection,children:[(0,r.jsx)("h2",{children:"Pickup Details"}),(0,r.jsxs)("label",{className:p().checkbox,children:[(0,r.jsx)("input",{type:"checkbox",checked:_,onChange:()=>S("pickup")}),"Same as My Details"]}),(0,r.jsx)(n.jT,{onLoad:e=>D.current=e,onPlaceChanged:()=>C("pickup"),children:(0,r.jsx)("input",{className:p().input,type:"text",placeholder:"Address",value:t.address,onChange:e=>s({...t,address:e.target.value})})}),(0,r.jsx)("input",{className:p().input,type:"text",placeholder:"Name",value:t.name,onChange:e=>s({...t,name:e.target.value})}),(0,r.jsx)("input",{className:p().input,type:"text",placeholder:"Phone",value:t.phone,onChange:e=>s({...t,phone:e.target.value})})]}),(0,r.jsxs)("div",{className:p().detailsSection,children:[(0,r.jsx)("h2",{children:"Drop-Off Details"}),(0,r.jsxs)("label",{className:p().checkbox,children:[(0,r.jsx)("input",{type:"checkbox",checked:v,onChange:()=>S("dropoff")}),"Same as My Details"]}),(0,r.jsx)(n.jT,{onLoad:e=>P.current=e,onPlaceChanged:()=>C("dropoff"),children:(0,r.jsx)("input",{className:p().input,type:"text",placeholder:"Address",value:d.address,onChange:e=>c({...d,address:e.target.value})})}),(0,r.jsx)("input",{className:p().input,type:"text",placeholder:"Name",value:d.name,onChange:e=>c({...d,name:e.target.value})}),(0,r.jsx)("input",{className:p().input,type:"text",placeholder:"Phone",value:d.phone,onChange:e=>c({...d,phone:e.target.value})})]})]}),(0,r.jsxs)("div",{className:p().mapSection,children:[(0,r.jsx)("h2",{children:"Map"}),(0,r.jsxs)(n.u6,{mapContainerStyle:m,center:x,zoom:8,children:[t.address&&d.address&&(0,r.jsx)(n.YK,{options:{origin:t.address,destination:d.address,travelMode:google.maps.TravelMode.DRIVING},callback:e=>{if(e?.routes.length>0){let t=e.routes[0].legs[0].distance.value/1e3;b(t),k((0,o.V)(t)),w(e)}}}),N&&(0,r.jsx)(n.C,{directions:N})]})]}),null!==y&&null!==j&&(0,r.jsxs)("div",{className:p().results,children:[(0,r.jsxs)("p",{children:["Distance: ",y.toFixed(2)," km"]}),(0,r.jsxs)("p",{children:["Delivery Charge: ₹",j.toFixed(2)]})]}),(0,r.jsx)("div",{className:p().buttons,children:(0,r.jsx)("button",{className:p().button,onClick:q,children:"Confirm Booking"})}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{className:p().cen,children:"For Delivery rates in PDF, click the links below"}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{children:(0,r.jsx)(u(),{href:"/standard.pdf",className:p().links,children:"Standard delivery rates."})}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{children:(0,r.jsx)(u(),{href:"/instant.pdf",className:p().links,children:"Instant delivery rates Outside Imphal."})}),(0,r.jsx)("div",{})]})})}},53668:(e,t,s)=>{"use strict";s.d(t,{V:()=>r});let r=e=>40+10*e},13784:(e,t,s)=>{"use strict";s.d(t,{R:()=>n});var r=s(58009),a=s(27518);let n=()=>{let[e,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{let e=JSON.parse(sessionStorage.getItem("user")||"{}");if(!e?.email)return;let{data:s,error:r}=await a.N.from("users").select("name, phone, address").eq("email",e.email).single();r||t(s)})()},[]),e}},17827:e=>{e.exports={layout:"layout_layout__p78rD",header:"layout_header__MHp_7",main:"layout_main__IrhRX",footer:"layout_footer___PulL"}},12590:e=>{e.exports={container:"page_container__BzThi",title:"page_title__6I4zK",subtitle:"page_subtitle__fsThf",detailsWrapper:"page_detailsWrapper__TEmK0",detailsSection:"page_detailsSection__qSkqN",input:"page_input__dDQpj",textarea:"page_textarea__TUGok",checkbox:"page_checkbox__zVfdN",mapSection:"page_mapSection__KADzs",results:"page_results__kHcFd",buttons:"page_buttons__B4mAB",button:"page_button__0O_WC",fv:"page_fv__fda2v",links:"page_links__Yps2c",cen:"page_cen__ok0Lw"}},80642:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(62740),a=s(17827),n=s.n(a);function i({children:e}){return(0,r.jsxs)("div",{className:n().layout,children:[(0,r.jsx)("header",{className:n().header,children:(0,r.jsx)("h1",{children:"Distance & Delivery Charge Calculator"})}),(0,r.jsx)("main",{className:n().main,children:e}),(0,r.jsx)("footer",{className:n().footer})]})}},45273:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/abc/Documents/ola/map_new-main/new/app/bookDelivery copy/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/abc/Documents/ola/map_new-main/new/app/bookDelivery copy/page.tsx","default")},46055:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(88077);let a=async e=>[{type:"image/x-icon",sizes:"1004x354",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,1866,8077,5429,8767],()=>s(37741));module.exports=r})();