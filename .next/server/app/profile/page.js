(()=>{var e={};e.id=6636,e.ids=[6636],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},65213:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>p,routeModule:()=>c,tree:()=>u});var t=s(70260),i=s(28203),a=s(25155),o=s.n(a),n=s(67292),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(r,l);let u=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,21762)),"/Users/abc/Documents/ola/map_new-main/new/app/profile/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"/Users/abc/Documents/ola/map_new-main/new/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["/Users/abc/Documents/ola/map_new-main/new/app/profile/page.tsx"],d={require:s,loadChunk:()=>Promise.resolve()},c=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},37516:(e,r,s)=>{Promise.resolve().then(s.bind(s,21762))},27244:(e,r,s)=>{Promise.resolve().then(s.bind(s,45302))},45302:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c});var t=s(45512),i=s(58009),a=s(79334),o=s(27518),n=s(72927),l=s.n(n),u=s(28531),p=s.n(u),d=s(45103);function c(){let[e,r]=(0,i.useState)(null),[s,n]=(0,i.useState)(!0),[u,c]=(0,i.useState)(null),[f,m]=(0,i.useState)(null),[_,h]=(0,i.useState)(null),[x,b]=(0,i.useState)(!1),[v,P]=(0,i.useState)(!1);(0,a.useRouter)();let g=async()=>{if(!f||!e)return;b(!0);let s=f.name.split(".").pop(),t=`user_pic_${e.email}_${Date.now()}.${s}`;try{let{data:s,error:i}=await o.N.storage.from("user-photos").upload(`user_photos/user_pic/${t}`,f);if(i)throw Error("Error uploading photo");let{publicUrl:a}=o.N.storage.from("user-photos").getPublicUrl(`user_photos/user_pic/${t}`).data,{error:n}=await o.N.from("users").update({photo:a}).eq("email",e.email);if(n)throw Error("Error updating user profile");r(e=>({...e,photo:a})),h(a),P(!0),setTimeout(()=>P(!1),2e3)}catch(e){c(e instanceof Error?e.message:"An unknown error occurred.")}finally{b(!1)}},w=async()=>{if(e)try{let{error:r}=await o.N.from("users").update({name:e.name,address:e.address,phone:e.phone,business_name:e.business_name,business_address:e.business_address,business_type:e.business_type,product_service:e.product_service,business_experience:e.business_experience,business_description:e.business_description}).eq("email",e.email);if(r)throw Error("Failed to save changes.");P(!0),setTimeout(()=>P(!1),2e3)}catch(e){c(e instanceof Error?e.message:"An unknown error occurred.")}};return s?(0,t.jsx)("p",{children:"Loading..."}):u?(0,t.jsx)("p",{children:u}):(0,t.jsxs)("div",{className:l().container,children:[(0,t.jsx)("h1",{className:l().title,children:"Edit Profile"}),(0,t.jsx)("div",{children:(0,t.jsx)(p(),{href:"/business/product",className:l().links,children:"Add Products"})}),(0,t.jsxs)("div",{className:l().profileInfo,children:[(0,t.jsxs)("div",{className:l().profilePhotoContainer,children:[(0,t.jsx)(d.default,{src:e?.photo||"/default-profile.png",alt:"Profile Photo",className:l().profilePhoto,width:150,height:150}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let r=e.target.files?.[0];if(r){m(r);let e=new FileReader;e.onloadend=()=>{h(e.result)},e.readAsDataURL(r)}},className:l().fileInput}),(0,t.jsx)("button",{onClick:g,disabled:x,className:l().uploadButton,children:x?"Uploading...":"Upload New Photo"})]}),_&&(0,t.jsxs)("div",{className:l().photoPreviewContainer,children:[(0,t.jsx)("h3",{children:"Preview"}),(0,t.jsx)(d.default,{src:_,alt:"Preview Image",width:200,height:200,className:l().previewImg})]}),(0,t.jsxs)("div",{className:l().formContainer,children:[[{label:"Name",value:e?.name,field:"name"},{label:"Email",value:e?.email,field:"email",disabled:!0},{label:"Address",value:e?.address,field:"address"},{label:"Phone",value:e?.phone,field:"phone"},{label:"Business Name",value:e?.business_name,field:"business_name"},{label:"Business Address",value:e?.business_address,field:"business_address"},{label:"Business Type",value:e?.business_type,field:"business_type"},{label:"Product/Service",value:e?.product_service,field:"product_service"},{label:"Business Experience",value:e?.business_experience,field:"business_experience"},{label:"Business Description",value:e?.business_description,field:"business_description"}].map(({label:s,value:i,field:a,disabled:o})=>(0,t.jsxs)("div",{className:l().inputGroup,children:[(0,t.jsx)("label",{children:s}),(0,t.jsx)("input",{type:"text",value:i||"",onChange:s=>r({...e,[a]:s.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg mb-4 bg-gray-800 text-gray-300 py-2 px-4",disabled:o})]},a)),(0,t.jsx)("button",{onClick:w,className:l().saveButton,children:"Save Changes"})]})]}),(0,t.jsx)("div",{className:`${l().popup} ${v?l().show:""}`,children:(0,t.jsx)("p",{children:"Update Successful"})})]})}},72927:e=>{e.exports={container:"ProfilePage_container__dPJxZ",title:"ProfilePage_title__Tedud",links:"ProfilePage_links__kEt1x",profileInfo:"ProfilePage_profileInfo__28J4J",profilePhotoContainer:"ProfilePage_profilePhotoContainer___OqTV",profilePhoto:"ProfilePage_profilePhoto__OZcQF",fileInput:"ProfilePage_fileInput__ARie3",uploadButton:"ProfilePage_uploadButton__u_DiX",photoPreviewContainer:"ProfilePage_photoPreviewContainer__jWGfR",previewImg:"ProfilePage_previewImg__ZRMSF",formContainer:"ProfilePage_formContainer__ZZoRU",inputGroup:"ProfilePage_inputGroup__cUYUh",saveButton:"ProfilePage_saveButton__LF62_",popup:"ProfilePage_popup__YUxv7",show:"ProfilePage_show__46irL"}},21762:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/abc/Documents/ola/map_new-main/new/app/profile/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/abc/Documents/ola/map_new-main/new/app/profile/page.tsx","default")},46055:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var t=s(88077);let i=async e=>[{type:"image/x-icon",sizes:"1004x354",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[638,1866,8077,8767],()=>s(65213));module.exports=t})();